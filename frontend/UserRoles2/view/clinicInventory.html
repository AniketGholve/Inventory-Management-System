<div ng-controller="alp">
    <div ng-include="'view/header.html'"></div>
    <div ng-include="'view/header4.html'"></div>
    <div class="container mt-3">
        <h3 class="text-center">Clinic Inventory SnapShot</h4>

            <div class="mt-3">
                <div class="d-flex justify-content-between">
                    <!-- <label for="dropdownTab" class="text-dark " style="font-size: 20px;"><h5>Choose :</h5></label> -->
                    <select id="dropdownViewTab" class="dropdownTab4" ng-model="id" ng-change="clinicName(id)">
                        <option label="Select Clinic" class="d-none"></option>
                        <option ng-repeat="x in clinicNames" ng-click="clinicName(x.locationId)"
                            value="{{x.locationId}}" class="text-center">{{x.name}}
                        </option>
                    </select>
                    <div>
                        <div class="d-grid " style="float: right;">
                            <div class="dropdown">
                                <!-- <a class="btn btn-info p-2 mx-1 my-1 row" onclick="downloadFunction()">Download</a> -->
                                <button class="dropbtn row mx-1">Download</button>
                                <div id="" class="dropdown-content ">
                                    <a class="" href="http://localhost:7890/download/InventoryExcel/{{downloadLocation}}">XLS</a>
                                    <hr class="hr1">

                                    <a class="" href="http://localhost:7890/download/inventoryPdf/{{downloadLocation}}">PDF</a>
                                </div>
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <table id="" class="table table-striped text-center">
                    <thead class="thead">
                        <tr>
                            <th>Doses</th>

                            <th>Doses on Hand </th>

                            <th>Expired Doses </th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="x in invetoryData">
                            <td>{{x.productName}}</td>
                            <td ng-click="getOnHand(x.productId)"><a data-bs-toggle="modal" data-bs-target="#ohHand"
                                    style="cursor: default;">{{x.onHand}}</a></td>

                            <td ng-click="getExpired(x.productId)"><a href="" ng-class="{'text-danger':x.expiredQty>0}"
                                    data-bs-toggle="modal" data-bs-target="#expiredDoses"
                                    style="cursor: default;">{{x.expiredQty}}</a></td>


                        </tr>
                    </tbody>
                </table>
            </div> <!-- Modal -->

            <div class="modal fade" id="ohHand" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">

                <div class="modal-dialog">

                    <div class="modal-content">

                        <div class="modal-header">

                            <h5 class="modal-title" id="exampleModalLabel">Serial Numbers</h5>

                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

                        </div>

                        <div class="modal-body">
                            <table id="patientDetailsTable" class="table table-striped table-bordered text-center ">
                                <tr>

                                    <!-- <th class="px-3">Serial Id</th> -->

                                    <th class="px-3">Serial Number</th>

                                    <th class="px-3">NDC</th>

                                    <th class="px-3">LOT</th>

                                    <th class="px-3">Expiry Date</th>

                                    <th class="px-3">Serial Status</th>

                                    <th class="px-3">Created On</th>

                                    <th class="px-3">Enterprise Name</th>

                                    <th class="px-3">Location Name</th>

                                    <th class="px-3">Product Id</th>

                                    <th class="px-3">Patient Specific</th>

                                    <!-- <th class="px-3">src Id</th> -->

                                </tr>

                                <tr ng-repeat="x in onHandData">

                                    <tr ng-repeat="x in onHandData">
                                        <td>{{x.serialNumber}}</td>
                                        <td>{{x.ndc}}</td>
                                        <td>{{x.lot}}</td>
                                        <td>{{x.expiryDate}}</td>
                                        <td>{{x.serialStatus}}</td>
                                        <td>{{x.createdOn}}</td>
                                        <td>{{x.enterpriseName}}</td>
                                        <td>{{x.clinicName}}</td>
                                        <td>{{x.productId}}</td>
                                        <td>{{x.patientSpecific}}</td>
                                

                                </tr>

                            </table>

                        </div>

                        <div class="modal-footer">

                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

                        </div>

                    </div>

                </div>

            </div>



            <div class="modal fade" id="expiredDoses" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">

                <div class="modal-dialog">

                    <div class="modal-content">

                        <div class="modal-header">

                            <h5 class="modal-title" id="exampleModalLabel">Serial Numbers</h5>

                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

                        </div>

                        <div class="modal-body">
                            <table id="patientDetailsTable" class="table table-striped table-bordered text-center">
                                <tr>

                                    <!-- <th class="px-3">Serial Id</th> -->

                                    <th class="px-3">Serial Number</th>

                                    <th class="px-3">NDC</th>

                                    <th class="px-3">LOT</th>

                                    <th class="px-3">Expiry Date</th>

                                    <th class="px-3">Serial Status</th>

                                    <th class="px-3">Created On</th>

                                    <th class="px-3">Enterprise Name</th>

                                    <th class="px-3">Location Name</th>

                                    <th class="px-3">Product Id</th>

                                    <th class="px-3">Patient Specific</th>

                                    <!-- <th class="px-3">Src Id</th> -->

                                </tr>

                                <tr ng-repeat="x in expiredData">

                                    <td>{{x.serialNumber}}</td>
                                        <td>{{x.ndc}}</td>
                                        <td>{{x.lot}}</td>
                                        <td>{{x.expiryDate}}</td>
                                        <td>{{x.serialStatus}}</td>
                                        <td>{{x.createdOn}}</td>
                                        <td>{{x.enterpriseName}}</td>
                                        <td>{{x.clinicName}}</td>
                                        <td>{{x.productId}}</td>
                                        <td>{{x.patientSpecific}}</td>

                                </tr>

                            </table>

                        </div>

                        <div class="modal-footer">

                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

                        </div>

                    </div>

                </div>

            </div>
    </div>
</div>